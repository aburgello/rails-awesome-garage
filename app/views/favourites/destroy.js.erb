<% if controller_name == 'favourites' %>
const favouriteElement = document.querySelector('#favourite_<%= @favourite.id %>');
if (favouriteElement) {
  favouriteElement.remove();
}
  Swal.fire({
    title: 'Removed!',
    text: '<%= @favourite.car.brand %> <%= @favourite.car.model %> has been removed from your favourites.',
    icon: 'success',
    confirmButtonText: 'OK'
  });

// Find the favourite item and remove it from the DOM
const favouriteItem = document.querySelector('#favourite_<%= @favourite.id %>');
if (favouriteItem) {
  favouriteItem.remove();
}

// Update the button to show "Add to Favourites" in the car page
const formContainer = document.querySelector('.ajax-favourites-form');
if (formContainer) {
  formContainer.innerHTML = ` 
    <h3 class="text-xl font-semibold mt-6">Favourite this car</h3>
    <%= form_with url: car_favourites_path(@car), method: :post, local: false, data: { remote: true } do %>
      <%= submit_tag "Add to Favourites", class: 'mt-2 bg-green-500 text-white p-2 rounded hover:bg-green-600 cursor-pointer' %>
  <% end %>
  `;
}
<% end %>
